{% extends "expert_page/layouts/expert_base.html" %}
{% block title %}កែប្រែព័ត៌មានជំងឺ{% endblock %}

{% block content %}
<div class="container p-0" style="max-width: 900px;">
    <h4 class="fw-bold mb-4 text-warning">✏️ កែប្រែព័ត៌មាន៖ {{ disease.disease_name }}</h4>
    
    <div class="card border-0 shadow-sm rounded-4 p-4">
        <form method="POST" enctype="multipart/form-data">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label class="form-label fw-bold">ឈ្មោះជំងឺ</label>
                    <input type="text" name="disease_name" class="form-control" value="{{ disease.disease_name }}" required>
                </div>
                
                <div class="col-md-4 mb-3">
                    <label class="form-label fw-bold">ប្រភេទ</label>
                    <select name="disease_type" class="form-select">
                        <option value="Fungal" {% if disease.disease_type == 'Fungal' %}selected{% endif %}>ជំងឺផ្សិត</option>
                        <option value="Bacterial" {% if disease.disease_type == 'Bacterial' %}selected{% endif %}>ជំងឺបាក់តេរី</option>
                        <option value="Viral" {% if disease.disease_type == 'Viral' %}selected{% endif %}>ជំងឺវីរុស</option>
                        <option value="Pest" {% if disease.disease_type == 'Pest' %}selected{% endif %}>សត្វល្អិត</option>
                        <option value="Other" {% if disease.disease_type == 'Other' %}selected{% endif %}>ផ្សេងៗ</option>
                    </select>
                </div>

                <div class="col-md-4 mb-3">
                    <label class="form-label fw-bold">កម្រិតធ្ងន់ធ្ងរ</label>
                    <select name="severity_level" class="form-select">
                        <option value="Low" {% if disease.severity_level == 'Low' %}selected{% endif %}>កម្រិតស្រាល</option>
                        <option value="Medium" {% if disease.severity_level == 'Medium' %}selected{% endif %}>កម្រិតមធ្យម</option>
                        <option value="High" {% if disease.severity_level == 'High' %}selected{% endif %}>កម្រិតធ្ងន់ធ្ងរ</option>
                        <option value="Critical" {% if disease.severity_level == 'Critical' %}selected{% endif %}>គ្រោះថ្នាក់ខ្លាំង</option>
                    </select>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label fw-bold">រូបភាពបច្ចុប្បន្ន</label><br>
                {% if disease.image %}
                    <img src="{{ url_for('static', filename='images/' + disease.image) }}" width="100" class="rounded mb-2 border">
                {% else %}
                    <span class="text-muted">គ្មានរូបភាព</span>
                {% endif %}
                <input type="file" name="image" class="form-control mt-2" accept="image/*">
                <small class="text-muted">ដាក់រូបថ្មីប្រសិនបើចង់ផ្លាស់ប្តូរ</small>
            </div>

            <div class="mb-4">
                <label class="form-label fw-bold">ការពិពណ៌នា</label>
                <textarea name="description" class="form-control" rows="5">{{ disease.description }}</textarea>
            </div>

            <button type="submit" class="btn btn-warning text-white rounded-pill px-5">ធ្វើបច្ចុប្បន្នភាព</button>
            <a href="{{ url_for('expert.disease_list') }}" class="btn btn-light rounded-pill px-4 ms-2">ថយក្រោយ</a>
        </form>
    </div>
</div>
{% endblock %}